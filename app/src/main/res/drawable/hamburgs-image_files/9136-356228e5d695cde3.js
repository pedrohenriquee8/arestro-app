!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2014e4a5-1daa-48a0-90de-50625aadbb19",e._sentryDebugIdIdentifier="sentry-dbid-2014e4a5-1daa-48a0-90de-50625aadbb19")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9136],{1557:function(e,t,n){n.d(t,{U:function(){return r}});let r=(0,n(52983).createContext)({})},79187:function(e,t,n){n.d(t,{u:function(){return j}});var r=n(97458),a=n(52983),l=n(23113),s=n(90312),c=n(91394),o=n(25288),u=n(19170),i=n(7616),d=n(45451);let f=()=>(0,a.useCallback)(e=>{let{collectionId:t,collectionName:n,fileId:r,location:a}=e;(0,d.sendGTMEvent)({collection_id:t,collection_name:n,event_name:"add_to_collection",event:"ga4event",file_id:r,location:a})},[]),h=()=>(0,a.useCallback)(e=>{let{location:t,fileId:n}=e;(0,d.sendGTMEvent)({event:"ga4event",event_name:"collect",location:t,file_id:n})},[]);var v=n(49504),p=n(63202);let y=async e=>{let{id:t,collectionId:n,resourceType:r}=e,a=new URLSearchParams;return a.append("collectionId",n.toString()),a.set("resourceType",r),await (0,p.c)("/api/user/resources/".concat(t,"/collections?").concat(a.toString()),"DELETE")},w=async e=>{let{id:t,collectionId:n,resourceType:r}=e;return await (0,p.c)("/api/user/resources/".concat(t,"/collections"),"POST",{collectionId:n,resourceType:r})};var m=n(94498),g=n(2983),b=n(11632),x=n.n(b),C=n(10893);let _=()=>{let{t:e}=(0,C.$G)("detailCommon");return(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 px-4 py-2 text-sm text-surface-foreground-1",children:[(0,r.jsx)("span",{className:"whitespace-nowrap text-sm font-semibold text-surface-foreground-1",children:e("savedSuccessfully")}),(0,r.jsx)(x(),{href:"/user/collections",legacyBehavior:!0,children:(0,r.jsx)("span",{className:"cursor-pointer whitespace-nowrap text-xs font-normal !text-surface-foreground-accent-0",children:e("seeMyCollections")})})]})},T=e=>{let{type:t,id:n,location:d}=e,[p,b]=(0,a.useState)(null),x=(0,a.useRef)(!1),[C,T]=(0,a.useState)(!1),[E,S]=(0,a.useState)(null),I=(0,i.b9)(m.mX),R=f(),j=h(),N=(0,l.a)("smMax"),k=(0,c.d)(),D=(0,o.NL)(),P=(0,v.gx)(),{signUpUrl:O,setLoginCookies:B}=(0,s.e)(),{openToast:M}=(0,u.x_)(),A=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!x.current||e)try{e?P():I(!0);let t=await D.fetchQuery((0,v.us)({page:1,resourceId:n}));S(t),x.current=!0}catch(e){console.error("Error fetching collections when opening the popover:",e)}finally{e||I(!1)}},[D,n,I,P]),L=async()=>{if(!k){B(),window.location.href=O;return}(0,g.B)(t,"add_to_collection"),await A(),T(!0),j({location:d,fileId:n})},G=e=>b(t=>[...null!=t?t:[],e]),U=e=>b(t=>{var n;return null!==(n=null==t?void 0:t.filter(t=>t!==e))&&void 0!==n?n:[]}),Q=(0,a.useCallback)(async(e,a)=>{try{G(e),await w({id:n,collectionId:e,resourceType:t}),R({fileId:n,collectionId:e,collectionName:a,location:d}),M({message:(0,r.jsx)(_,{}),showIcon:!1,showCloseButton:!1,position:N?"bottom-center":"top-right"}),await A(!0)}catch(e){console.error(e),M()}finally{U(e),N&&T(!1)}},[n,t,R,d,M,N,A]);return{responseCollections:E,collectionIdsLoading:p,isOpen:C,setIsOpen:T,onButtonOpenClick:L,handleAddToCollection:Q,handleRemoveFromCollection:(0,a.useCallback)(async e=>{try{G(e),await y({id:n,collectionId:e,resourceType:t}),await A(!0)}catch(e){console.error(e),M()}finally{U(e)}},[n,M,t,A]),handleOpenChange:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];T(e)}}};var E=n(99);let S=()=>{let{data:e,meta:{pagination:{nextPage:t}}}=(0,i.Dv)(m.HQ);return{collections:e,nextPage:t}},I=()=>{let{collections:e,nextPage:t}=S(),[n,r]=(0,a.useState)([]),l=(0,i.b9)(m.GD),s=(0,a.useRef)();(0,a.useEffect)(()=>{(null==e?void 0:e.length)>0&&r(e.map(E.V))},[e,t]);let c=null!==t,o=t=>{r((null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))).map(E.V))},u=async e=>{s.current&&clearTimeout(s.current),s.current=setTimeout(async()=>{l(e)},350)};return{isSearchByApi:c,searchCollections:n,handleSearch:e=>{c?u(e):o(e)}}};var R=n(1557);let j=e=>{let{children:t,id:n,type:l,location:s}=e,{responseCollections:c,collectionIdsLoading:o,isOpen:u,setIsOpen:i,onButtonOpenClick:d,handleOpenChange:f,handleAddToCollection:h,handleRemoveFromCollection:v}=T({type:l,id:n,location:s}),{searchCollections:p,isSearchByApi:y,handleSearch:w}=I(),m=(0,a.useMemo)(()=>({id:n,type:l,searchCollections:p,responseCollections:c,collectionIdsLoading:o,isSearchByApi:y,isOpen:u,setIsOpen:i,handleSearch:w,handleAddToCollection:h,handleRemoveFromCollection:v,onButtonOpenClick:d,handleOpenChange:f}),[n,l,p,c,o,y,u,d,i,h,v,w,f]);return(0,r.jsx)(R.U.Provider,{value:m,children:t})}},88659:function(e,t,n){n.d(t,{r:function(){return l}});var r=n(52983),a=n(1557);let l=()=>(0,r.useContext)(a.U)},99:function(e,t,n){n.d(t,{V:function(){return r}});let r=e=>{var t,n;return{id:e.id,name:e.name,author:(null===(t=e.author)||void 0===t?void 0:t.name)||void 0,hasResourceInCollection:e.hasResourceInCollection,preview:null===(n=e.previews[0])||void 0===n?void 0:n.url}}},40308:function(e,t,n){n.d(t,{_:function(){return i}});var r=n(97458),a=n(23113),l=n(53344),s=n.n(l),c=n(79187),o=n(88659);let u=s()(()=>Promise.all([n.e(8454),n.e(6596),n.e(8569)]).then(n.bind(n,44991)).then(e=>e.DetailAddToCollectionModal),{loadableGenerated:{webpack:()=>[44991]},ssr:!1}),i=e=>{let{children:t,id:n,type:a,location:l}=e;return(0,r.jsx)(c.u,{id:n,type:a,location:l,children:(0,r.jsx)(d,{children:t})})},d=e=>{let{children:t}=e,{isOpen:n,handleOpenChange:l}=(0,o.r)(),s=(0,a.a)("smMax");return(0,r.jsxs)(r.Fragment,{children:[t,n&&s&&(0,r.jsx)(u,{onOpenChange:l})]})}},36324:function(e,t,n){n.d(t,{Y:function(){return c}});var r=n(72661),a=n(72118),l=n(52983),s=n(6132);let c=e=>{let{resourceType:t}=e,n=(0,r.b)(),{abTestOption:c,isMounted:o}=(0,s.QK)(),u=(0,l.useCallback)(()=>{if(a.Z.get(s.B$))return;let e=Math.floor(100*Math.random()+1);for(let[t,r]of Object.entries(s.I0))if((e-=r)<=0){a.Z.set(s.B$,t,{expires:s.fj,path:"/",domain:n});return}},[n]),i="vector"===t||"photo"===t||"psd"===t,d=(0,l.useMemo)(()=>!1,[c,i,o,t]);return{setABSidebarSmartBarCookie:u,aBTestOption:null!=c?c:"A",isSidebarSmartBarEnabled:d,shouldReserveSidebarSpace:!!t&&i}}},80719:function(e,t,n){n.d(t,{X:function(){return a}});var r=n(63202);let a=e=>{let{page:t,resourceId:n,searchTerm:a,collectionIds:l,ownership:s}=e,c=l?l.join(","):void 0,o={page:"".concat(t),...n&&{resourceId:"".concat(n)},...a&&{"filter[term]":a},...c&&{"filter[ids]":c},...s&&{"filter[ownership]":s}},u="/api/user/collections?".concat(new URLSearchParams(o));return(0,r.c)(u,"GET")}},49504:function(e,t,n){n.d(t,{gx:function(){return h},lL:function(){return f},us:function(){return d}});var r=n(59077),a=n(78511),l=n(25288),s=n(7616),c=n(52983),o=n(80719),u=n(94498);let i=["collections","all"],d=e=>{let{page:t,searchTerm:n,resourceId:a}=e;return(0,r.C)({queryKey:[...i,{page:t,resourceId:a,searchTerm:n}],queryFn:async()=>{let{data:e,success:r}=await (0,o.X)({page:t,resourceId:a,searchTerm:n});if(!r)throw Error(e);return e}})},f=e=>{let{page:t=1,resourceId:n}=e,r=(0,s.Dv)(u.GD);return(0,a.a)(d({page:t,searchTerm:r,resourceId:null!=n?n:null}))},h=()=>{let e=(0,l.NL)();return(0,c.useCallback)(()=>{e.invalidateQueries({queryKey:i})},[e])}},94498:function(e,t,n){n.d(t,{GD:function(){return a},HQ:function(){return l},mX:function(){return c},w0:function(){return s}});var r=n(24399);let a=(0,n(73139).rw)(null),l=(0,r.cn)({data:[],meta:{pagination:{nextPage:null,perPage:0,prevPage:null,currentPage:0}}}),s=(0,r.cn)([]),c=(0,r.cn)(!1)},6132:function(e,t,n){n.d(t,{B$:function(){return l},I0:function(){return c},QK:function(){return d},fj:function(){return s},x1:function(){return i}});var r=n(97458),a=n(52983);let l="sidebar_smart_bar_test",s=new Date(new Date().getTime()+2592e6),c={A:25,A2:25,B:25,B2:25},o=()=>"A",u=(0,a.createContext)({abTestOption:null,isMounted:!1}),i=e=>{let{children:t}=e,[n,l]=(0,a.useState)(!1),[s,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{l(!1),c(o())},[]),(0,r.jsx)(u.Provider,{value:{abTestOption:s,isMounted:n},children:t})},d=()=>{let e=(0,a.useContext)(u);if(void 0===e)throw Error("useABTestSidebar must be used within ABTestSidebarProvider");return e}},63202:function(e,t,n){n.d(t,{c:function(){return r}});let r=async(e,t,n,r)=>{let a=r?new Headers:void 0;return(null==r?void 0:r.locale)&&a&&a.set("accept-language",r.locale),(null==r?void 0:r.cache)&&a&&a.set("cache",r.cache),fetch(e,{method:t,...n&&{body:JSON.stringify(n)},...r&&{...r,headers:a}}).then(async e=>e.ok?{success:!0,data:204===e.status?null:await e.json()}:400===e.status?{success:!1,data:e.statusText}:401===e.status||405===e.status?{success:!1,data:"AUTHENTICATION_ERROR"}:403===e.status?{success:!1,data:"FORBIDDEN"}:500===e.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:404===e.status?{success:!1,data:"NOT_FOUND"}:429===e.status?{success:!1,data:"TOO_MANY_REQUESTS"}:{success:!1,data:await e.json()})}},11924:function(e,t,n){n.d(t,{N:function(){return u}});var r=n(52983),a=n(91394),l=n(94891),s=n(50833),c=n(65629),o=n(21212);let u=()=>{let e=(0,a.d)(),t=(0,r.useCallback)(async e=>{let t=[...(0,s.zP)(l.yP),e];t.length>=l.p0?(await (0,c.J)(t)).success&&(0,s.dV)(l.yP):(0,s.rl)(l.yP,t)},[]);return{handleLog:(0,r.useCallback)(async n=>{if(!e)return;let r=o.Wv.safeParse(n);r.success&&await t(r.data)},[t,e])}}},59077:function(e,t,n){n.d(t,{C:function(){return r}});function r(e){return e}}}]);